<head>
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
    <script src="https://cdn.bootcss.com/jquery/3.4.1/jquery.js"></script>
</head>

<body>
    <!-- <div class="container">
        <form method="post" action="" enctype="multipart/form-data" id="myform">
            <div class='preview'>
                <img src="" id="img" width="100" height="100">
            </div>
            <div>
                <input type="file" id="file" name="file" />
                <input type="button" class="button" value="Upload" id="but_upload">
            </div>
        </form>
    </div> -->

    <form method="post" enctype="multipart/form-data">
        <fieldset>
            <label for="file">Select a file</label>
            <input name="file" id="upload-file" type="file">
        </fieldset>
        <fieldset>
            <button id="upload-file-btn" type="button">Upload</button>
        </fieldset>
    </form>

    <div id="api_output"> </div>
    <ol>
        <li>Coffee</li>
        <li>Milk</li>
    </ol>


    <script>
        $(function () {
            $('#upload-file-btn').click(function () {
                var data = new FormData();
                var form_data = $('#upload-file')[0].files[0];
                data.append('data', form_data)
                $.ajax({
                    type: 'POST',
                    url: '/test/',
                    data: data,
                    contentType: false,
                    cache: false,
                    processData: false,
                    error: function () {
                        console.log("upload error")
                    },
                    success: function (data, textStatus, jQxhr) {
                        console.log(data)
                        $('#api_output').html(data);
                        $("#input").val("");
                    },
                });
            });
        });

        // $("#but_upload").click(function () {

        //     var data = new FormData();
        //     var files = $('#file')[0].files[0];
        //     data.append('file', files);

        //     $.ajax({
        //         url: '/test/',
        //         type: 'POST',
        //         data: data,
        //         contentType: false,
        //         processData: false,
        //         success: function (response) {
        //             // if (response != 0) {
        //             //     $("#img").attr("src", response);
        //             //     $(".preview img").show(); // Display image element
        //             // } else {
        //             //     alert('file not uploaded');
        //             // }
        //             console.log('success!!!')
        //         },
        //         error: function () {
        //             console.log("upload error")
        //         },

        //     });
        // });

        // function api_call(input) {
        //     $.ajax({
        //         url: "/test/",
        //         method: 'POST',
        //         contentType: 'application/json',
        //         data: JSON.stringify(input),
        //         success: function (data, textStatus, jQxhr) {
        //             console.log(data)
        //             $('#api_output').html(data);
        //             $("#input").val("");
        //         },
        //         error: function (jqXhr, textStatus, errorThrown) {
        //             $('#api_output').html("There was an error");
        //             console.log(errorThrown);
        //         },
        //         timeout: 3000
        //     });
        // }
        // $(document).ready(function () {
        //     // request when clicking on the button
        //     $('#btn').click(function () {
        //         var input = $("#input").val();
        //         api_call(input);
        //         input = "";
        //     });
        // });

    </script>
</body>